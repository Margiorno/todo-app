<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Task Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/task-result.css}">
</head>
<body class="bg-light">
<div class="container mt-5">

    <div th:if="${taskResponse != null}">
        <div th:if="${message != null and !message.isEmpty()}" class="alert alert-success" role="alert" th:text="${message}">
            Success message text.
        </div>

        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Task Details</h3>
            </div>
            <div class="card-body">
                <dl class="row mb-0">
                    <dt class="col-sm-3">Title</dt>
                    <dd class="col-sm-9" th:text="${taskResponse.title}"></dd>

                    <dt class="col-sm-3">Description</dt>
                    <dd th:if="${taskResponse.description!=null and !taskResponse.description.isEmpty()}" class="col-sm-9" th:text="${taskResponse.description}"></dd>
                    <dd th:if="${taskResponse.description==null or taskResponse.description.isEmpty()}" class="col-sm-9" >-</dd>

                    <dt class="col-sm-3">Priority</dt>
                    <dd class="col-sm-9" th:text="${taskResponse.priority}"></dd>

                    <dt class="col-sm-3">Status</dt>
                    <dd class="col-sm-9" th:text="${taskResponse.status}"></dd>

                    <dt class="col-sm-3">Date</dt>
                    <dd class="col-sm-9" th:text="${taskResponse.taskDate}"></dd>

                    <dt class="col-sm-3">Time</dt>
                    <dd class="col-sm-9">
                        <span th:text="${taskResponse.startTime}"></span>
                         – 
                        <span th:text="${taskResponse.endTime}"></span>
                    </dd>

                    <dt th:if="${taskResponse.team != null}" class="col-sm-3">Team</dt>
                    <dd th:if="${taskResponse.team != null}" class="col-sm-9" th:text="${taskResponse.team.name}"></dd>

                    <dt th:if="${taskResponse.assignees != null and !taskResponse.assignees.isEmpty()}" class="col-sm-3">Assigned users</dt>
                    <dd th:if="${taskResponse.assignees != null and !taskResponse.assignees.isEmpty()}"
                        class="col-sm-9"
                        th:each="assignee : ${taskResponse.assignees}"
                        th:text="${assignee.id}">
                    </dd>

                </dl>
            </div>

<!--            TODO USER VERIFICATION -->
            <div class="card-footer text-end">
                <a th:href="@{/task/edit/{id}(id=${taskResponse.id}, team=${taskResponse.team?.id})}" class="btn btn-primary me-2">Edit</a>
                <a th:href="@{/}" class="btn btn-secondary">Dashboard</a>
            </div>
        </div>
    </div>

</div>
</body>
</html>